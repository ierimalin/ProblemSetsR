<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Alin Ierima">

<title>Data Report 3</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="data-report3 (1)_files/libs/clipboard/clipboard.min.js"></script>
<script src="data-report3 (1)_files/libs/quarto-html/quarto.js"></script>
<script src="data-report3 (1)_files/libs/quarto-html/popper.min.js"></script>
<script src="data-report3 (1)_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="data-report3 (1)_files/libs/quarto-html/anchor.min.js"></script>
<link href="data-report3 (1)_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="data-report3 (1)_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="data-report3 (1)_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="data-report3 (1)_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="data-report3 (1)_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Data Report 3</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Alin Ierima </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<section id="dataset" class="level1">
<h1>Dataset</h1>
<p><strong>Source</strong>: We use the dataset from a survey run by Kaufmann, Andre, and Kőszegi. Their study analysed the behaviour of consumers, their social concerns and their beliefs on market dampening. For this data report however, we will only use a fraction of the available data in order to replicate two graphs and shortly look at the relationship between some background characteristics and differing beliefs.</p>
</section>
<section id="cleaning" class="level1">
<h1>Cleaning</h1>
<p><strong>Cleaned Documentation</strong> - the original name is in brackets if it is changed:</p>
<ul>
<li><p><strong>scenario</strong>(vig): contains <strong>eight</strong> scenarios that are subsequently used to assess dampening effects: fuel, meat, flights, subelectricity, subhouse, energy, subclothing, subcoffee. Note that the prefix <code>sub</code> indicates switching to a more sustainable counterpart, while the others refer to reducing the consumption of said good. Saved as a <strong>factor</strong>.</p></li>
<li><p><strong>conseq</strong>: contains <strong>four</strong> scenarios that are used to assess concerns for consequences: textile(wages), chicken(animal welfare), co2(emmissions), (non-reciclable)waste. Saved as <strong>factor</strong>.</p></li>
<li><p><strong>effect</strong>: the dampening effect that consumers expect the market to exert. Goes from <strong>1 to 5</strong>: 1(decrease by more), 2(decrease one-to-one), 3(decrease by less), 4(no effect), 5(actually increase). Saved as <strong>factor</strong>.</p></li>
<li><p><strong>conseq_positive</strong>(wtp_1) - Social concerns in an effective situation (when their action has a positive consequence). Ranges from <strong>0 to 10000</strong>. Saved as <strong>numeric</strong>.</p></li>
<li><p><strong>conseq_negative</strong>(wtp_2) - Social concerns in an ineffective situation. Otherwise same as above.</p></li>
<li><p><strong>politics</strong> - Political affiliation. Ranges from 1 to 3: Republican, Democratic and Independent. Saved as <strong>factor</strong></p></li>
<li><p><strong>Gender</strong> - Ranges from 1 to 5: Male, Female, Non-Binary, Self-Describe, Prefer not to say. Saved as <strong>factor</strong>.</p></li>
<li><p><strong>Age</strong> - Saved as <strong>numeric</strong>.</p></li>
</ul>
</section>
<section id="exploration" class="level1">
<h1>Exploration</h1>
<ol type="1">
<li>Replicating <code>fig_beliefs.pdf</code></li>
</ol>
<div class="cell">
<div class="cell-output-display">
<p><img src="data-report3--1-_files/figure-html/unnamed-chunk-1-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ol start="2" type="1">
<li>Replicating <code>fig_conseq.pdf</code></li>
</ol>
<div class="cell">
<div class="cell-output-display">
<p><img src="data-report3--1-_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ol start="2" type="1">
<li>Let’s see how three types of background information affect the respondents’ dampening beliefs. The results will be discussed in the following section.</li>
</ol>
<ul>
<li>Age</li>
</ul>
<div class="cell">
<div class="cell-output-display">
<p><img src="data-report3--1-_files/figure-html/graph%20age-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li>Gender<br>
</li>
</ul>
<div class="cell">
<div class="cell-output-display">
<p><img src="data-report3--1-_files/figure-html/graph%20gender-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li>Lastly, political affiliation. Though not necessary, I have included the NAs because it is quite interesting that some people have refused responding to this question, yet present themselves in an effect category.</li>
</ul>
<div class="cell">
<div class="cell-output-display">
<p><img src="data-report3--1-_files/figure-html/graph%20politics-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="conclusions" class="level1">
<h1>Conclusions</h1>
<p><strong>Age</strong> does seem to make an important difference in how people assess dampening. People under 21 are the most likely to believe their changes in consumption mean little in the big scheme of things (effect 4), but this drops in proportion for other age groups and for the most elderly, it is non-existent. The opinion that decreasing one’s consumption means a 1:1 reduction in aggregate consumption is the most popular amongst all age groups (effect 2) and seems to increase the older an individual is.</p>
<p>In regards to <strong>gender</strong>, females and males are quite similar, the only difference being that females are slightly more convinced by the 1:1 reduction option. Non-binary people represent more heterogeneity in their responses, as many believe their effect would be less than 1:1.</p>
<p>In regards to <strong>political affiliation</strong>, republicans and independents seem the most alike in their response. Democrats are slightly less likely to believe their change of behaviour would not make lead to any aggregate change, and more likely to pick the 1:1 option.</p>
</section>
<section id="code-explanation" class="level1">
<h1>Code Explanation</h1>
<p>I will explain the creation of the first figure. The logical order behind this task was to 1. create the plot for each scenario, 2. create the plot for the percentages of all scenarios combined, 3. find a way to combine them.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>individual_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(percentages, <span class="fu">aes</span>(<span class="at">x =</span> scenario, <span class="at">y =</span> percentage, <span class="at">fill =</span> effect)) <span class="sc">+</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> F) <span class="sc">+</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">paste0</span>(percentage, <span class="st">"%"</span>)), <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.5</span>), <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="st">"Percentage (%)"</span>, <span class="at">title =</span> <span class="st">"Distribution of Effects for Each Scenario"</span>) <span class="sc">+</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>   <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For 1, I have created a <strong>plot of percentages</strong>, with the x axis as scenario and y as percentages, and of course coloured by the effect. Note that this graph does not have a legend because it will share the same legend with the second one. To create the on-text percentages i needed to attach the string % to the percentages taken from the percentage object. Then, I put the ylab (xlab is not included) and a title. Theme_minimal() assures that both graphs will have a common white background. Then, I edit the x scenario labels to put them vertically because they are too long to present otherwise.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>pooled_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(pooled_percentages, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> pooled_percentage, <span class="at">fill =</span> effect)) <span class="sc">+</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">"stack"</span>, <span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span>  </span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="cn">NULL</span>, <span class="at">title =</span> <span class="st">"Pooled Distribution of Effects"</span>) <span class="sc">+</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For 2, I skipped defining X because I want the results in a single bar and I am directly using the data from the object on the y axis. Then, I defined it as a geom_bar stacked onto each other. The other parts are quite intuitively similar to the 1.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>(combined_plot <span class="ot">&lt;-</span> individual_plot <span class="sc">|</span> pooled_plot <span class="sc">+</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_layout</span>(</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">ncol =</span> <span class="dv">2</span>, </span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">widths =</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">1</span>)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For 3, I have used the <code>patchwork</code> package that allows for very easy combination of graphs. Therefore it was as easy as saving 1. and 2. into objects and then doing <code>1 | 2</code> (1+2 would have also done the same). I mentioned the width and that the plot should be arranged in two columns</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>